# 模块 → WordPress 主题结构映射（基于《全站模块分析》）

目标：把现有“模块”落到可维护的 WordPress 主题文件与 `template-parts/` 结构中，并明确调用方式（主模板 / `get_template_part` / Woo Hook）。

---

## 1) 主题目录结构树（推荐）

> 说明：目录名用 `your-theme/` 代表主题根目录。

```
your-theme/
  header.php                 # 输出站点头部骨架；统一挂载全站 overlay（搜索/抽屉等）
  footer.php                 # 输出站点底部骨架；统一挂载全站弹窗与页脚组件
  index.php                  # Blog 列表兜底模板（无更细分模板时的列表入口）
  front-page.php             # 首页模板（只负责“模块编排”，各区块拆到 template-parts）
  single.php                 # 内容详情兜底模板（Blog/Solution 等）；组合目录/分享/上下篇等
  page.php                   # 普通单页兜底模板（About/Why Us/FAQ/Contact 等）
  archive.php                # 归档兜底模板（分类/标签/自定义类型归档等）
  functions.php              # 注册主题能力、菜单、侧边栏；挂载/替换 Woo Hooks（不写业务结构）

  template-parts/
    layout/
      site-header.php
      site-footer.php

    components/
      overlay-search-modal.php
      panel-offcanvas-menu.php
      popup-catalog-download.php
      popup-product-inquiry.php

      breadcrumbs.php
      pagination.php
      page-hero-title.php

      toc.php
      share-buttons.php
      post-navigation.php

      woo-archive-result-count.php

    loop/
      card-post.php
      card-product.php
      loop-solution-grid.php

    front-page/
      home-hero.php
      home-stats.php
      section-about-intro.php
      section-category-grid.php
      section-feature-media.php
      section-product-grid.php
      section-service-grid.php
      section-project-grid.php

    woocommerce/
      product-gallery.php
      product-tabs.php

  woocommerce/
    archive-product.php
    single-product.php
```

---

## 2) 模块 → 文件映射（文档版）

说明：

- “目标模板”按你要求的 8 类模板标注：`header.php` / `footer.php` / `index.php` / `front-page.php` / `single.php` / `page.php` / `archive.php` / WooCommerce 模板
- “调用方式”仅标注三种：主模板内 / `get_template_part` / Woo Hook

### A. 全站公共模块（必须抽象）

#### 站点页头（`site-header`）

- 目标模板：`header.php`
- 推荐文件：`template-parts/layout/site-header.php`
- 放置目录：`template-parts/layout/`
- 调用方式：`header.php` 内 `get_template_part('template-parts/layout/site-header')`

#### 全站搜索弹层（`overlay-search-modal`）

- 目标模板：`header.php`
- 推荐文件：`template-parts/components/overlay-search-modal.php`
- 放置目录：`template-parts/components/`
- 调用方式：`header.php` 内 `get_template_part('template-parts/components/overlay-search-modal')`

#### 侧滑抽屉（`panel-offcanvas-menu`）

- 目标模板：`header.php`
- 推荐文件：`template-parts/components/panel-offcanvas-menu.php`
- 放置目录：`template-parts/components/`
- 调用方式：`header.php` 内 `get_template_part('template-parts/components/panel-offcanvas-menu')`

#### 全站营销弹窗（Catalog Download，`popup-catalog-download`）

- 目标模板：`footer.php`
- 推荐文件：`template-parts/components/popup-catalog-download.php`
- 放置目录：`template-parts/components/`
- 调用方式：`footer.php` 内 `get_template_part('template-parts/components/popup-catalog-download')`

#### 站点页脚（`site-footer`）

- 目标模板：`footer.php`
- 推荐文件：`template-parts/layout/site-footer.php`
- 放置目录：`template-parts/layout/`
- 调用方式：`footer.php` 内 `get_template_part('template-parts/layout/site-footer')`

### B. 跨页面可复用模块（建议抽象）

#### 面包屑（`breadcrumbs`）

- 目标模板：`archive.php` / `single.php` / WooCommerce 模板
- 推荐文件：`template-parts/components/breadcrumbs.php`
- 放置目录：`template-parts/components/`
- 调用方式：
  - 主模板内：`get_template_part('template-parts/components/breadcrumbs')`
  - Woo Hook：在 `functions.php` 内通过 `add_action` 挂载到 `woocommerce_before_main_content` 等位置

#### 分页（`pagination`）

- 目标模板：`archive.php` / `index.php` / WooCommerce 模板
- 推荐文件：`template-parts/components/pagination.php`
- 放置目录：`template-parts/components/`
- 调用方式：
  - 主模板内：`get_template_part('template-parts/components/pagination')`
  - Woo Hook：如需要统一分页输出，可在 `functions.php` 内替换/包裹 Woo 分页 Hook

#### 内容页首屏标题区（`page-hero-title`）

- 目标模板：`page.php` / `archive.php` / `single.php`
- 推荐文件：`template-parts/components/page-hero-title.php`
- 放置目录：`template-parts/components/`
- 调用方式：主模板内 `get_template_part('template-parts/components/page-hero-title')`

#### WooCommerce 产品卡片（`card-product`）

- 目标模板：WooCommerce 模板 / `front-page.php` / `single.php` / `archive.php`
- 推荐文件：`template-parts/loop/card-product.php`
- 放置目录：`template-parts/loop/`
- 调用方式：
  - 主模板/自定义查询 Loop：循环内 `get_template_part('template-parts/loop/card-product')`
  - Woo Hook：如要替换 Woo 默认产品卡片输出，可在 `functions.php` 用 `remove_action`/`add_action` 组合实现

### C. 页面类型公共模块（建议抽象为类型片段）

#### Blog 列表文章卡片（`card-post`）

- 目标模板：`index.php` / `archive.php`
- 推荐文件：`template-parts/loop/card-post.php`
- 放置目录：`template-parts/loop/`
- 调用方式：Loop 中 `get_template_part('template-parts/loop/card-post')`

#### 文章目录（`toc`）

- 目标模板：`single.php`
- 推荐文件：`template-parts/components/toc.php`
- 放置目录：`template-parts/components/`
- 调用方式：`single.php` 内按需 `get_template_part('template-parts/components/toc')`

#### 分享按钮（`share-buttons`）

- 目标模板：`single.php` / WooCommerce 模板
- 推荐文件：`template-parts/components/share-buttons.php`
- 放置目录：`template-parts/components/`
- 调用方式：
  - 主模板内：`get_template_part('template-parts/components/share-buttons')`
  - Woo Hook：挂载到 `woocommerce_single_product_summary`（或其前后）等位置

#### 上一篇/下一篇（`post-navigation`）

- 目标模板：`single.php`
- 推荐文件：`template-parts/components/post-navigation.php`
- 放置目录：`template-parts/components/`
- 调用方式：`single.php` 内 `get_template_part('template-parts/components/post-navigation')`

#### Solution 归档列表（`loop-solution-grid`）

- 目标模板：`archive.php`
- 推荐文件：`template-parts/loop/loop-solution-grid.php`
- 放置目录：`template-parts/loop/`
- 调用方式：`archive.php`（通过条件分支）内 `get_template_part('template-parts/loop/loop-solution-grid')`

### D. WooCommerce 页面私有模块（暂不抽象）

#### 归档结果统计（`woo-archive-result-count`）

- 目标模板：WooCommerce 模板
- 推荐文件：`template-parts/components/woo-archive-result-count.php`
- 放置目录：`template-parts/components/`
- 调用方式：
  - Woo Hook：挂载到 `woocommerce_before_shop_loop`
  - 或主模板内：在 `woocommerce/archive-product.php` 中直接 `get_template_part(...)`

#### 产品/类目询盘弹窗（`popup-product-inquiry`）

- 目标模板：WooCommerce 模板
- 推荐文件：`template-parts/components/popup-product-inquiry.php`
- 放置目录：`template-parts/components/`
- 调用方式：
  - 主模板内：在 `woocommerce/archive-product.php`、`woocommerce/single-product.php` 内按条件调用
  - 或 Woo Hook：统一挂载到 `wp_footer` 或 `woocommerce_after_main_content`

#### 产品详情图片画廊（`product-gallery`）

- 目标模板：WooCommerce 模板
- 推荐文件：`template-parts/woocommerce/product-gallery.php`
- 放置目录：`template-parts/woocommerce/`
- 调用方式：
  - 主模板内：`woocommerce/single-product.php` 中调用 `get_template_part(...)`
  - 或 Woo Hook：替换 `woocommerce_show_product_images`

#### 产品详情 Tabs（`product-tabs`）

- 目标模板：WooCommerce 模板
- 推荐文件：`template-parts/woocommerce/product-tabs.php`
- 放置目录：`template-parts/woocommerce/`
- 调用方式：
  - 主模板内：`woocommerce/single-product.php` 中调用 `get_template_part(...)`
  - 或 Woo Hook：替换 `woocommerce_output_product_data_tabs`

### E. 首页页面模块（暂不抽象，做页面编排拆分）

#### 首页内容区块（Hero/统计/关于/分类/优势/服务/案例/产品栅格）

- 目标模板：`front-page.php`
- 推荐文件：
  - `template-parts/front-page/home-hero.php`
  - `template-parts/front-page/home-stats.php`
  - `template-parts/front-page/section-about-intro.php`
  - `template-parts/front-page/section-category-grid.php`
  - `template-parts/front-page/section-feature-media.php`
  - `template-parts/front-page/section-product-grid.php`
  - `template-parts/front-page/section-service-grid.php`
  - `template-parts/front-page/section-project-grid.php`
- 放置目录：`template-parts/front-page/`
- 调用方式：`front-page.php` 内按区块顺序逐个 `get_template_part('template-parts/front-page/<file>')`

---

## 3) 主模板职责（按模板类型落位）

### `header.php`

- 负责页面骨架顶部：`site-header` + 全站 overlay（`overlay-search-modal`、`panel-offcanvas-menu`）
- 调用方式：`header.php` 内部统一 `get_template_part(...)`

### `footer.php`

- 负责页面骨架底部：`site-footer` + 全站弹窗（`popup-catalog-download`）
- 若需要按页面类型挂载：可在 `footer.php` 内做条件，或交给 Woo Hook / `wp_footer` 处理

### `front-page.php`

- 负责首页模块编排：`template-parts/front-page/` 目录下逐段输出
- 调用方式：主模板内 `get_template_part(...)`

### `index.php`

- 作为 Blog 列表兜底（未提供更细分模板时）
- 主要组合：Loop（`card-post`）+ `pagination`

### `archive.php`

- 作为归档兜底（分类/标签/自定义类型归档）
- Blog 归档：Loop（`card-post`）+ `pagination`
- Solution 归档：`loop-solution-grid` + `pagination`（可通过条件分支调用）

### `single.php`

- 作为内容详情兜底（Blog/Solution）
- 常见组合：`breadcrumbs`（可选）+ 正文 + `toc`（可选）+ `share-buttons` + `post-navigation`

### `page.php`

- 作为单页内容兜底
- 常见组合：`page-hero-title`（可选）+ `the_content()`

### WooCommerce 模板（`woocommerce/` 目录）

- `woocommerce/archive-product.php`
  - 组合：`breadcrumbs`（可选）+ `woo-archive-result-count` + 产品 Loop（`card-product`）+ `pagination` + `popup-product-inquiry`（可选）
- `woocommerce/single-product.php`
  - 组合：`breadcrumbs` + `product-gallery` + 商品标题/摘要/Meta（若拆分可再做组件）+ `product-tabs` + 相关产品 Loop（`card-product`）+ `share-buttons`（可选）+ `popup-product-inquiry`（可选）

---

## 4) 调用方式速查

- 主模板内（骨架级）：`get_header()` / `get_footer()`
- 模块化拆分：`get_template_part('template-parts/<dir>/<file>')`
- Woo 注入/替换：Woo Hook（在 `functions.php` 注册 `add_action` / `remove_action`，由 Hook 触发模板片段输出）
