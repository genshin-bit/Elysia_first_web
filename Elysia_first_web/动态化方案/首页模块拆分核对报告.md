# 首页模块拆分核对报告

本报告详细规划了 `front-page.php` 的模块化拆分方案，旨在提升代码的可维护性与复用性。

## 1. 拆分清单表格

| 建议文件名 | 功能描述 | HTML 标识/锚点 (data-id) | 重用性评估 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| `template-parts/front-page/home-hero.php` | 核心 Banner (视频/标题/按钮) | `0c2b206` | 首页私有 | 包含背景视频链接 |
| `template-parts/front-page/home-stats.php` | 核心数据统计 (30+ years, 1350+ Projects) | `4cf8d02` | 首页私有 | 包含 SVG 图标 |
| `template-parts/front-page/section-about-intro.php` | 关于我们简介 (图片 + 文本) | `21a508f` | 首页私有 | |
| `template-parts/front-page/section-category-grid.php` | 产品分类网格 (8个分类) | `454207d` | 首页私有 | 包含大量 SVG 图标 |
| `template-parts/front-page/section-industry-grid.php` | 行业应用网格 (Industries We Serve) | `400003d` | 首页私有 | 包含 Hover 效果 |
| `template-parts/front-page/section-why-choose-us.php` | 为什么选择我们 (视频弹窗 + 文本) | `7901169` | 首页私有 | |
| `template-parts/front-page/section-feature-products.php` | 推荐产品轮播 (Feature products) | `4e9a588` | 首页私有 | WooCommerce Product Loop |
| `template-parts/front-page/section-service-grid.php` | 服务支持网格 (Check Out Our Service) | `b34dc8e` | 首页私有 | |
| `template-parts/front-page/section-project-grid.php` | 项目案例展示 (Our Projects) | `8a2279e` | 首页私有 | |
| `footer.php` | 全局页脚 (含 Contact, Copyright) | `<footer ...>` | 全局通用 | 包含 Elementor Footer 模板调用 |
| `header.php` | 全局页头 | `<header ...>` | 全局通用 | 包含 Elementor Header 模板调用 |
| `template-parts/components/popup-catalog-download.php` | 目录下载弹窗 | `data-elementor-type="popup"` | 全局通用 | Zoho Form iframe |

## 2. 拆分后的 front-page.php 结构预览

```php
<?php
get_header(); ?>

<main id="main" class="site-main hfeed">
    <div class="ct-container-full" data-content="normal">
        <article id="post-4217" <?php post_class(); ?>>
            <div class="entry-content is-layout-constrained">
                <div data-elementor-type="wp-page" data-elementor-id="4217" class="elementor elementor-4217" data-elementor-post-type="page">
                    
                    <?php get_template_part('template-parts/front-page/home-hero'); ?>
                    
                    <?php get_template_part('template-parts/front-page/home-stats'); ?>
                    
                    <?php get_template_part('template-parts/front-page/section-about-intro'); ?>
                    
                    <?php get_template_part('template-parts/front-page/section-category-grid'); ?>
                    
                    <?php get_template_part('template-parts/front-page/section-industry-grid'); ?>
                    
                    <?php get_template_part('template-parts/front-page/section-why-choose-us'); ?>
                    
                    <?php get_template_part('template-parts/front-page/section-feature-products'); ?>
                    
                    <?php get_template_part('template-parts/front-page/section-service-grid'); ?>
                    
                    <?php get_template_part('template-parts/front-page/section-project-grid'); ?>
                    
                </div>
            </div>
        </article>
    </div>
</main>

<?php 
// 引入全局组件
get_template_part('template-parts/components/popup-catalog-download'); 

get_footer(); 
?>
```

## 3. 核心注意项

1.  **全局变量**: 
    -   `section-feature-products.php` 中包含 WooCommerce 的产品循环，需确保 `global $product;` 被正确调用或上下文环境未丢失（通常 `get_template_part` 会保持上下文）。
    -   如有自定义查询 `$query = new WP_Query(...)`，务必在循环结束后调用 `wp_reset_postdata();`。

2.  **Hooks**:
    -   保留 `wp_head()` 在 `header.php`。
    -   保留 `wp_footer()` 在 `footer.php`。
    -   `front-page.php` 原始代码中包含 Elementor 的 wrapper `<div data-elementor-type="wp-page" ...>`，这个 wrapper 必须保留在主文件中，包裹住所有的 template parts，否则 Elementor 的样式可能会失效（尤其是依赖选择器层级的样式）。

3.  **资源路径**:
    -   所有 `src=".../static/..."` 的硬编码路径已在之前的步骤中转换为 `<?php echo get_template_directory_uri(); ?>/static/...`，拆分时需保持此动态调用。

4.  **Elementor ID**:
    -   每个 Section 的 `data-id` 是 Elementor CSS 样式的锚点，**必须**严格保留，不能更改或丢失。
