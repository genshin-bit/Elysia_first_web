# 社会责任页面动态化方案（`page-social-responsibility.php`）

> 约束与前提  
> - 仅使用 ACF 与 WordPress 原生能力（菜单、页面、媒体库等），不新增其他插件  
> - 保持与 `index-7.html`、当前 Elementor 导出结构在视觉和前端结构上的一致性  
> - 结合《社会责任模块化拆分核对报告.md》以及已有单页方案（关于我们、工厂、项目案例、质量制造），统一组件复用与页面联动思路  
> - 文案与图片改造以“渐进式动态化”为原则：先实现“可配”，再按需要提升复用级别  

---

## 一、页面与模块结构回顾

- 模板文件：`page-social-responsibility.php`  
  - 通过 `get_template_part` 挂载 1 个资源模块 + 6 个内容模块：
    - `one_page/social-responsibility-assets.php`
    - `one_page/social-responsibility-hero.php`
    - `one_page/social-responsibility-intro-and-pillars.php`
    - `one_page/social-responsibility-employees.php`
    - `one_page/social-responsibility-client.php`
    - `one_page/social-responsibility-environment.php`
    - `one_page/social-responsibility-vision.php`

- 内容分区概览（参考拆分核对报告）：
  - Hero：首屏标题 “Social Responsibility”，与全站 Page Hero 模式一致  
  - Intro + Pillars：左侧导语 + 按钮，右侧四个图标卡片（Employees’ Happiness / Quality Product / Eco-Friendly Principle / Our Vision）  
  - Employees 区块：左图右文  
  - Client 区块：右图左文  
  - Environment 区块：左图右文  
  - Vision 区块：左文右图，作为总结与愿景说明  

> 重要提示：  
> - 拆分报告中已强调：若引入 ACF 管理文案，应优先绑定“当前页面 ID”而不是 Options，全局复用由组件层解决。  
> - 本方案沿用这一原则：除 Hero 通用配置外，其余叙事段落均使用“页面级字段”，保持文案独立且易于迁移。

---

## 二、总体动态化策略

1. 字段作用域
   - Hero 相关：走“通用 Page Hero 组件 + 页面级字段”的模式，统一到 `components/page-hero-title.php`，各页面通过字段控制标题等内容。  
   - 其余 5 个内容区块：使用绑定到“当前页面”的字段组，每个区块一个字段组或共享通用字段组结构。  

2. 组件复用原则
   - Hero：完全收敛到 `page-hero-title.php` 组件，与 Contact、Why Us、Quality Manufacturing 等页面统一。  
   - 图文两列区块（Employees / Client / Environment / Vision）：短期继续以本页私有模块存在，但字段结构设计成可迁移到未来的通用组件（如 `section-media-content`）时无需改字段。  
   - Contact CTA：继续通过全站共享的 Elementor Popup 链接实现，仅将文案（按钮文字）交给 ACF 管理。  

5. 与其他页面的联动
   - 导航层面：通过 WordPress 菜单管理 Social Responsibility 页的入口，不在本方案中额外设计菜单字段。  
   - 内容联动层面：依托已有“单页关系”设计，本页只需暴露自身标识，供其他页面引用时作为“社会责任落地页”使用。具体做法见第六部分。  

---

## 三、ACF 字段组设计

### 1. 字段组：Social Responsibility 页面 Hero

- 字段组名称：`社会责任页面 - 基础与首屏`  
- 作用范围：  
  - 位置规则：Page Template 等于 `社会责任`（即 `page-social-responsibility.php` 对应页面）  
- 字段列表：
  - `social_responsibility_hero_title`（Text）
    - 用途：覆盖 Hero 标题，默认值为页面标题 `get_the_title()` 或静态文案 `Social Responsibility`。  

> Hero 部分不单独做 Options，而是让每个页面持有自己的 Hero 标题，保持灵活性。

### 2. 字段组：导语与四个支柱（Intro + Pillars）

- 字段组名称：`社会责任页面 - 导语与支柱`  
- 作用范围：Page Template = `社会责任`  
- 字段列表：
  - 基础导语字段：
    - `sr_intro_eyebrow`（Text）示例默认值：`What we do`  
    - `sr_intro_title`（Text）示例默认值：`We fulfill our social obligations`  
    - `sr_intro_body_main`（Wysiwyg）对应现有第一段文本  
    - `sr_intro_body_sub`（Wysiwyg，可选）对应现有第二段文本  
    - `sr_intro_cta_text`（Text）默认：`CONTACT US`  
  - 四个支柱卡片字段（Repeater）
    - 字段名：`sr_pillars`（Repeater，最少 4 条，最多 4 条，顺序可调整）  
    - 子字段：
      - `sr_pillar_key`（Text，内部标识，可选，如 `employees`、`quality`、`eco`、`vision`）  
      - `sr_pillar_title`（Text）  
      - `sr_pillar_description`（Textarea）  
    - 图标处理策略：
      - 继续使用当前内联 SVG，不做动态化，以免引入复杂选择器。  
      - 若未来需要可视化切换图标，可新增一个 Select 字段存储图标类型，并在模板内按类型选择不同 SVG。  

### 3. 字段组：Employees 区块

- 字段组名称：`社会责任页面 - 员工责任模块`  
- 作用范围：Page Template = `社会责任`  
- 字段列表：
  - `sr_employees_image`（Image）
    - 说明：替代当前固定图片 `static/image/50a65420c8e44486e2fa6d1acc005ab.jpg`  
  - `sr_employees_eyebrow`（Text）默认：`Responsibility for employees`  
  - `sr_employees_title`（Text）默认：`We protect the physical and mental health of our employees`  
  - `sr_employees_body`（Wysiwyg）
    - 用于整段正文，迁移当前三段 `<p>` 内容；若需要保留分段，可在编辑器中直接回车分段。  

### 4. 字段组：Client 区块

- 字段组名称：`社会责任页面 - 客户责任模块`  
- 作用范围：Page Template = `社会责任`  
- 字段列表：
  - `sr_client_image`（Image）
    - 替代当前固定图片 `static/image/c3f4d477-d54c-477b-9f33-27609d8059da.jpg`  
  - `sr_client_eyebrow`（Text）默认：`Responsibility for client`  
  - `sr_client_title`（Text）默认：`We Provide the best quality`  
  - `sr_client_body`（Wysiwyg）对应现有两段 `<p>` 内容  

### 5. 字段组：Environment 区块

- 字段组名称：`社会责任页面 - 环境责任模块`  
- 作用范围：Page Template = `社会责任`  
- 字段列表：
  - `sr_environment_image`（Image）
    - 替代当前固定图片 `static/image/96a786ac-c8e9-45b9-91ba-22c321210dfd.jpg`  
  - `sr_environment_eyebrow`（Text）默认：`Responsibility for environment`  
  - `sr_environment_title`（Text）默认：`We value the environment`  
  - `sr_environment_body`（Wysiwyg）对应现有两段 `<p>` 内容  

### 6. 字段组：Vision 区块

- 字段组名称：`社会责任页面 - 愿景模块`  
- 作用范围：Page Template = `社会责任`  
- 字段列表：
  - `sr_vision_image`（Image）
    - 替代当前固定图片 `static/image/a39a438a-dc99-49d1-b5c5-c449610e2321.jpg`  
  - `sr_vision_eyebrow`（Text）默认：`Our vission`  
  - `sr_vision_title`（Text）默认：`Give you a better Roll Forming Machine`  
  - `sr_vision_body`（Wysiwyg）对应当前两段正文  

---

## 四、模板改造思路（不改变外观）

以下为关键模块的改造思路，实际实现时按照已有单页动态化方案的代码风格接入 `get_field` 即可。

### 1. Hero：接入通用 `page-hero-title` 组件

- 当前 `social-responsibility-hero.php` 为完全静态的 `<section>`，以后不再直接使用。  
- 在 `page-social-responsibility.php` 中，将：

```php
get_template_part('template-parts/one_page/social-responsibility-hero');
```

替换为：

```php
get_template_part(
    'template-parts/components/page-hero-title',
    null,
    array(
        'title' => get_field('social_responsibility_hero_title') ?: get_the_title()
    )
);
```

- 如需为不同页面设置不同背景或样式，可在 `page-hero-title.php` 中扩展额外参数和字段，本方案先只管理标题文本。  

### 2. Intro + Pillars 区块

- 在 `social-responsibility-intro-and-pillars.php` 中按以下思路替换静态内容：
  - 左侧导语区：
    - `What we do` → 由 `get_field('sr_intro_eyebrow')` 输出；为空则不显示该行。  
    - 主标题 → 由 `get_field('sr_intro_title')` 输出；为空则不显示。  
    - 正文部分 → 使用 `the_field('sr_intro_body_main')` 和 `the_field('sr_intro_body_sub')`，为空则不输出对应段落。  
    - 按钮文字 → 由 `get_field('sr_intro_cta_text')` 输出；为空则不渲染按钮，`href` 仍保持当前 Elementor Popup 链接不变，保证与其他页面共享同一弹窗。  
  - 右侧四个支柱卡片：  
    - 从 Repeater `sr_pillars` 渲染，按顺序输出实际配置的卡片。  
    - 未配置或字段为空的卡片不输出，布局由已配置项决定。  

### 3. Employees / Client / Environment / Vision 区块

四个模块模板改造方式完全一致，只是字段名前缀不同。以 Employees 为例：

- 图片：

```php
$employees_image = get_field('sr_employees_image');
if ($employees_image) {
    echo wp_get_attachment_image($employees_image, 'full', false, array(
        'class' => 'attachment-full size-full wp-image-490'
    ));
}
```

- 文案：
  - 小标题：仅当 `sr_employees_eyebrow` 有值时输出对应元素。  
  - 大标题：仅当 `sr_employees_title` 有值时输出对应元素。  
  - 正文：仅当 `sr_employees_body` 有值时输出整段内容。  

Client / Environment / Vision 三个模块完全沿用该模式，只需替换字段前缀。  

---

## 五、组件复用与未来扩展

1. Hero 与其他页面的统一
   - Hero 区块完全统一到 `template-parts/components/page-hero-title.php`，与以下页面共享：  
     - About Us、Why Us、Factory、Quality Manufacturing、Project 等。  
   - 各页面只负责提供字段 `*_hero_title` 或使用默认 `get_the_title()`。  

2. 图文两列模块的潜在抽象
   - 当前 Social Responsibility 页的四个责任模块（Employees / Client / Environment / Vision）均为两列图文布局，只是图片左右交错。  
   - 字段结构上可归纳为一个通用模型：
     - 图片字段  
     - Eyebrow 文本  
     - 主标题  
     - 正文（富文本）  
     - 图像位置（左/右，可在未来新增一个 Select 字段）  
   - 当 About / Why Us / Factory 等页面也需要大量类似叙事区块时，可以将该模型抽象为 `components/section-media-content.php`，当前字段前缀稍作统一即可平滑迁移。  

3. 与 Contact 弹窗的复用
   - Intro 区块的 `CONTACT US` 按钮继续使用全站统一的 Elementor Popup ID，与 Factory、Quality Manufacturing 等页面复用同一弹窗内容。  
   - ACF 仅负责按钮文本，不改变弹窗逻辑，避免对现有联系表单插件产生影响。  

---

## 六、与其他页面的联动设计

1. 作为“社会责任落地页”的引用
   - 在已有的“单页关系 / 页面联动”全局字段组中（在关于我们、工厂等方案中已规划），增加或复用一个字段表示“社会责任专题页”：  
     - 字段示例：`global_page_social_responsibility`（Post Object，类型为 Page）。  
   - 其他页面（如 About Us、Why Us、Quality Manufacturing）的叙事模块中若需要引导用户了解企业社会责任，可使用该字段生成跳转链接而非硬编码 URL：  

```php
$csr_page = get_field('global_page_social_responsibility', 'option');
if ($csr_page) {
    $csr_url = get_permalink($csr_page);
}
```

2. 与产品与项目页的软联动
   - 虽然本页不直接包含产品或项目模块，但可以通过以下方式与相关页面形成软联动：  
     - 在 Vision 或 Environment 文案中嵌入指向 Project、Quality Manufacturing 页的文本链接，链接地址通过全局字段（如 `global_page_project`、`global_page_quality_manufacturing`）获取。  
   - 这样可以从社会责任叙事中自然导流到具体项目案例或质量体系说明。  

3. 与站点 Footer 的联动
   - 拆分报告已说明 Footer 属于全站统一模块，由 `footer.php` 负责输出。  
   - 底部导航中的 “Social Responsibility” 链接只需在 WordPress 菜单中配置到当前页面，无需额外 ACF 字段。  

---

## 七、实施步骤与验证建议

1. 在后台创建上述字段组并绑定到 Social Responsibility 页面模板。  
2. 先在测试环境中：
   - 为本页填充与当前静态文案一致的字段值；  
   - 对比前后 HTML 输出是否结构一致（特别是 Elementor 的 `data-id`、类名不做改动）。  
3. 确认 Hero 已成功切换到 `page-hero-title` 组件后，对比与其他页面的首屏标题样式是否统一。  
4. 验证 Contact 弹窗、全站 Footer、头部导航等全局模块是否未受影响。  

通过以上方案，可以在不改变现有前端结构和视觉效果的前提下，为 Social Responsibility 页面引入可维护、可扩展的动态化能力，并与全站其他单页在 Hero 组件和页面联动逻辑上保持一致。

