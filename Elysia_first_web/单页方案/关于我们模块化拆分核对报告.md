# 关于我们模块化拆分核对报告

> 目标：基于 `page-about-us.php`，按照《模块映射.md》和《全站模块分析.md》的规范，对 About Us 页面进行模块识别与拆分规划，并评估复用性。

---

## 一、拆分清单表格

扫描范围：  
[`wp-content/themes/Elysia_first_web/page-about-us.php`](file:///e:/phpstudy_pro/WWW/wp-content/themes/Elysia_first_web/page-about-us.php#L1-L309) 中 `<main id="main">` 下所有顶级 `section.elementor-section.elementor-top-section`。

共识别出 4 个主要逻辑区块（其中 1 个建议使用全站通用组件实现）。

### 1. 页面首屏标题区（Hero / Page Title）

| 字段 | 内容 |
| --- | --- |
| 建议文件名 | `template-parts/components/page-hero-title.php`（全站通用，不放在 `one_page` 下） |
| 功能描述 | 页面首屏大标题区域，仅包含 “About Us” 标题，对应普通单页的 Hero Title 区块。 |
| HTML 标识/锚点 | 顶级 section：`<section ... data-id="9b89ead" ...>`；内部核心元素：`<h1 class="elementor-heading-title elementor-size-default">About Us</h1>`（约 `L114–L123`）。 |
| 重用性评估 | **全站通用（需移至 `components`）**。对应《全站模块分析.md》中 9) “内容页首屏标题区（Page Hero / Page Title Section）”，建议抽象为 `page-hero-title` 组件，在 `page.php`、About / Why Us / Factory / Social Responsibility / FAQ / Contact 等所有单页中共用。 |

**备注**：  
对于 About 页面，不再单独建 `section-about-hero.php`，而是：

- 在 `page-about-us.php` 中调用：`get_template_part('template-parts/components/page-hero-title');`
- 通过后台 / 自定义字段控制标题文案（如直接使用 `the_title()`）。

### 2. About 公司介绍区（左图右文 + CONTACT US 按钮）

| 字段 | 内容 |
| --- | --- |
| 建议文件名 | `template-parts/one_page/section-about-company-intro.php` |
| 功能描述 | 左侧展示公司形象大图；右侧为 “About SUNWAY” 副标题、主标题 “Professional manufacturer and exporter of cold-forming machinery”，两段公司介绍文案，以及 “CONTACT US” 按钮。按钮通过 Elementor Popup（ID 306）触发全站联系表单弹窗。 |
| HTML 标识/锚点 | 顶级 section：`<section ... data-id="3fd15dce" ...>`（约 `L128–L171`）。<br>关键特征：左侧图片 `<img ... src="<?php echo get_template_directory_uri(); ?>/static/image/240702111754-1-1024x576.jpg" ...>`；右侧副标题 `<h5>About SUNWAY</h5>`；主标题 `<h2>Professional manufacturer and exporter of cold-forming machinery</h2>`；CTA 按钮 `<a class="elementor-button ... href="#elementor-action%3Aaction%3Dpopup%3Aopen%26settings%3DeyJpZCI6IjMwNiIsInRvZ2dsZSI6ZmFsc2V9">CONTACT US</a>`。 |
| 重用性评估 | **页面私有（About Us 专用）**。文案和图片高度绑定 SUNWAY 公司介绍，不适合直接复用到其它单页。布局为“左图右文 + CTA”，如果后续其它页面也出现同构区块，可再抽象为通用组件（如 `section-media-text-cta.php`）迁移至 `components`。弹窗触发依赖全站组件 `popup-product-inquiry`。 |

### 3. Our Capabilities + 工厂引流（双图背景）

| 字段 | 内容 |
| --- | --- |
| 建议文件名 | `template-parts/one_page/section-about-capabilities.php` |
| 功能描述 | 标题 “Our Capabilities”，副标题 “We Meet timeliness and quality requirements”，一段企业精神与服务理念介绍；右下角有 “Step into our factory” 按钮，跳转到 Factory 页面；右侧为两张叠加的工厂相关图片（About Us 2 / About Us 3）。整体是 About 页的“能力与优势 + 工厂导流”区块。 |
| HTML 标识/锚点 | 顶级 section：`<section ... data-id="37486ef4" ...>`（约 `L172–L204+`）。<br>关键特征：`<h5>Our Capabilities</h5>`；`<h2>We Meet timeliness and quality requirements</h2>`；按钮 `<a ... href="index-6.html">Step into our factory</a>`；右侧图片容器 `data-id="b6db815"`，内部两张图片：`e9a3fd78-68f6-4c5b-a78d-70d937aff6ee.jpg` 与 `f3e8d9e7-2ff4-45b1-867c-c04b66dfe49f.jpg`。 |
| 重用性评估 | **页面私有（About Us 专用）**。文案和跳转 URL 均与 About 场景紧密耦合。若未来 Factory 或其它页面也需要类似“能力 + 工厂 CTA”的布局，可考虑提炼为通用 `section-about-factory-cta` 或更抽象的 features 组件。当前阶段建议保留为 `one_page` 下的 About 专用模块。 |

### 4. Our Mission / Our Gold / R & D 三列使命区

| 字段 | 内容 |
| --- | --- |
| 建议文件名 | `template-parts/one_page/section-about-mission-gold-rd.php` |
| 功能描述 | 背景为幻灯片（slideshow），内部分为三列卡片：01 Our mission、02 Our Gold、03 R & D。每列包含编号、标题、说明文字，说明文字带有 `zoomIn` 动画（依赖 `zoomIn.min.css`）。整体是对公司使命、目标与研发能力的集中展示。 |
| HTML 标识/锚点 | 顶级 section：`<section ... data-id="165f95c0" ...>`（约 `L220–L304`）。`data-settings` 中包含 `"background_background":"slideshow"` 与 `background_slideshow_gallery`；三列分别为 `data-id="252b6837"`、`"5d1b642a"`、`"4ffcf4d6"`。每列内部有编号 `<p><strong>01 / 02 / 03</strong></p>`，标题 `Our mission` / `Our Gold` / `R & D`，说明文字对应 `data-id="117abb6e"` / `"49239f8"` / `"7e56b15b"`，并带 `_animation":"zoomIn"`。 |
| 重用性评估 | **页面私有（About Us 专用）**。三列内容均为 SUNWAY 品牌的使命与研发能力描述，目前仅 About 页使用。布局属于“背景轮播 + 三列 feature 卡片”，如后续在 Social Responsibility / Quality Manufacturing 等页面出现同构结构，可升级为通用 features 组件迁移至 `components`。暂时放在 `one_page` 目录下。 |

---

## 二、拆分后的 `page-about-us.php` 结构预览

目标：主模板负责骨架和模块编排，各业务区块拆分到 `template-parts/components/` 与 `template-parts/one_page/` 中。

推荐的 `page-about-us.php` 结构示意（仅展示调用关系）：

```php
<?php
/**
 * Template Name: About Us
 * 关于我们页面模板（从 swforming/index-4.html 迁移）
 */

get_header();
?>

<main id="main" class="site-main hfeed">
    <div class="ct-container-full" data-content="normal">
        <article id="post-<?php the_ID(); ?>" <?php post_class('page'); ?>>
            <div class="blocksy-woo-messages-default woocommerce-notices-wrapper">
                <div class="woocommerce"></div>
            </div>

            <div class="entry-content is-layout-constrained">
                <div class="elementor elementor-188" data-elementor-type="wp-page" data-elementor-id="188">

                    <?php
                    // 1) 全站通用：页面首屏标题区
                    get_template_part('template-parts/components/page-hero-title');

                    // 2) About 私有：公司介绍（左图右文 + CTA）
                    get_template_part('template-parts/one_page/section-about-company-intro');

                    // 3) About 私有：Our Capabilities + 工厂引流
                    get_template_part('template-parts/one_page/section-about-capabilities');

                    // 4) About 私有：使命 / Gold / R&D 三列区块
                    get_template_part('template-parts/one_page/section-about-mission-gold-rd');
                    ?>

                </div>
            </div>
        </article>
    </div>
</main>

<?php
get_footer();
```

注意：

- `<main>` / `<article>` / `.entry-content` / `.elementor.elementor-188` 等骨架建议保留在 `page-about-us.php` 中，不拆到分片文件里。
- 每个新建的 `section-about-*.php` 文件仅输出单个顶级 `<section class="elementor-section elementor-top-section ...">...</section>`。

---

## 三、复用与目录放置策略

结合《模块映射.md》与《全站模块分析.md》，About Us 页的模块放置策略如下：

- **components 目录（全站通用）**
  - `template-parts/components/page-hero-title.php`  
    - 对应文档中的 `page-hero-title` 模块。  
    - 在 `page.php`、`page-about-us.php` 以及其它单页模板中统一调用。  
    - 建议内部使用 `the_title()` 作为标题来源，并预留背景图 / 面包屑等扩展点。
  - `template-parts/components/popup-product-inquiry.php`（已存在）  
    - 作为全站统一的“联系我们 / 询盘”弹窗组件。  
    - 通过 Footer 或 Woo Hook 全局输出一次，各页面仅通过带 `popup:open` 的按钮进行触发。

- **one_page 目录（About 私有）**
  - `template-parts/one_page/section-about-company-intro.php`  
  - `template-parts/one_page/section-about-capabilities.php`  
  - `template-parts/one_page/section-about-mission-gold-rd.php`  

后续若发现其它页面（如 Factory / Why Us / Social Responsibility）与这些区块在结构和样式上高度同构，可按以下演进路径处理：

1. 将重复逻辑从多个 `section-*.php` 中抽出到 `components/` 下的更通用组件。
2. 为不同页面通过参数（全局变量、`get_field()`、`get_theme_mod()` 或自定义选项）控制文案与图片。
3. 保留 `one_page` 下的文件作为“编排壳”，仅负责组合与参数传递。

---

## 四、拆分时的核心注意项

1. **骨架与内容边界**
   - 仅在主模板中输出 `<main>` / `<article>` / `.entry-content` / `.elementor` 包裹。  
   - 分片文件只负责自身的 `<section>` 结构，避免重复嵌套骨架容器。

2. **弹窗触发与全局弹窗组件联动**
   - CONTACT US 按钮使用 `href="#elementor-action:action=popup:open&settings=...id=306..."` 触发 `data-elementor-id="306"` 的弹窗。  
   - 该弹窗内容集中在 `template-parts/components/popup-product-inquiry.php` 中，Footer 或 Hook 中需确保输出。  
   - 拆分 `section-about-company-intro.php` 时必须保留按钮 `href` 中的 popup 配置，不能改成直接嵌入表单。

3. **全局变量与 WooCommerce Hooks**
   - 当前 About 模板不依赖 `$product`、自定义 `WP_Query` 或 Woo Hooks，拆分不会打断这些上下文。  
   - 若未来在 About 页加入产品列表，可在主模板中构建查询，循环内调用 `template-parts/loop/card-product.php`，避免在 `one_page` 分片里直接写查询。

4. **样式与脚本加载**
   - `page-about-us.php` 顶部目前手工引入了大量 CSS/JS（Elementor、Blocksy、WooCommerce）。  
   - 理想状态应将这些资源迁移到 `functions.php` 中用 `wp_enqueue_style()` / `wp_enqueue_script()` 统一管理。  
   - 在模块拆分过程中，`one_page` 分片中不要再新增 `<link>` 或 `<script>`，只关注结构与内容。

5. **命名与未来可抽象性**
   - 即使目前模块归类为 About 私有，也建议使用具有一定泛化能力的命名（如 `section-about-company-intro` 而非 `section-about-us-1`）。  
   - 这样在未来升级为 `components` 时，只需移动文件并微调实现，而不必大幅改动调用代码。

---

本报告可作为后续实际拆分 `page-about-us.php` 的执行参考，也可对照其它单页（Why Us / Factory / Contact 等）进行类似的模块化梳理与复用规划。

