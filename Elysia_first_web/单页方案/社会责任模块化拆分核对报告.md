# 产品列表模块拆分核对报告（`page-social-responsibility.php`）

> 依据：  
> - `e:/phpstudy_pro/WWW/wp-content/themes/swforming/全站模块分析.md`  
> - `e:/phpstudy_pro/WWW/wp-content/themes/swforming/模块映射.md`  
> - 当前模板：`e:/phpstudy_pro/WWW/wp-content/themes/Elysia_first_web/page-social-responsibility.php`  
> - 原始静态页：`e:/phpstudy_pro/WWW/wp-content/themes/swforming/index-7.html`

---

## 一、拆分清单表格

> 说明：  
> - “建议文件名”统一放在 `template-parts/one_page/` 目录下，命名风格遵守《模块映射.md》（小写 + 连字符）。  
> - “重用性评估”字段按你的要求统一使用两种取值：  
>   - `首页私有`：理解为“当前页面私有 / 暂不抽象为全站组件”，即保留在 `one_page/`。  
>   - `全站通用（需移至 components 目录）`：推荐抽象为 `template-parts/components/` 下的全站级组件。  

### 1. 区块级拆分清单

| 建议文件名（位于 `template-parts/one_page/`） | 功能描述 | HTML 标识 / 锚点（在 `page-social-responsibility.php` 中） | 重用性评估 |
| --- | --- | --- | --- |
| `social-responsibility-assets.php` | Social Responsibility 页面专用的 `<meta>`、结构化数据 JSON-LD、Rank Math SEO 标签，以及 Elementor / Blocksy / WooCommerce / okki 分析等 CSS、JS 资源引入，保证与 `index-7.html` 渲染效果一致 | 紧随 `get_header();` 之后，从 `<head>` 中的 SEO `<meta>`、`<script type="application/ld+json">` 结构化数据开始，到所有以 `static/css/*.css`、`static/js/*.js` 为路径的 `<link rel='stylesheet'>` 和 `<script>` 结束 | 首页私有（单页 Social Responsibility 专用资源组合，虽然部分脚本在其他页也有，但各单页 Elementor Widget CSS 配置不同，不宜抽成统一组件） |
| `social-responsibility-hero.php` | 内容页首屏标题区：渲染 “Social Responsibility” 大标题，带背景 overlay，与其他单页 `Page Hero` 模式一致 | `<section ... class="elementor-section elementor-top-section elementor-element elementor-element-81c28b7 ct-section-stretched ...">` 内部的 `<h1 class="elementor-heading-title elementor-size-default">Social Responsibility</h1>` | 全站通用（需移至 components 目录）。对应《全站模块分析.md》中的“9) 内容页首屏标题区（Page Hero / Page Title Section）”，推荐最终收敛到 `template-parts/components/page-hero-title.php`，本页为该组件的一种使用场景。 |
| `social-responsibility-intro-and-pillars.php` | “What we do” 导语 + 四个社会责任支柱卡片（Employees’ Happiness / Quality Product / Eco-Friendly Principle / Our Vision），左侧为文案与按钮，右侧为两行两列的 Icon Box 网格 | 外层：`<section ... class="elementor-section elementor-top-section elementor-element elementor-element-117b1b23 ...">`；内部包含两个 inner section：`elementor-element-69c743de` 和 `elementor-element-1bb869f0`，每个 inner section 下各有两个 `.elementor-widget-icon-box`，如 `elementor-element-46b31df3`、`1aa863f7`、`39354560`、`563ec0fc` | 首页私有（目前仅出现在 Social Responsibility 单页，属于页面叙事型模块；可在未来如 About/Why Us 页面需要类似“四象限价值观说明”时再考虑抽象为 `components/`） |
| `social-responsibility-employees.php` | “Responsibility for employees” 区块：左图右文，两列布局。左侧展示员工相关图片，右侧为标题、小标题和三段正文，讲述员工幸福与工作环境 | `<section ... class="elementor-section elementor-top-section elementor-element elementor-element-5dd10705 ...">`，左列 `.elementor-element-7293d7ce` 内部的图片 widget `elementor-element-fc8b139`，右列 `.elementor-element-38518625` 下的 heading 与 text-editor：`elementor-element-bccf46b`、`4e8c1a0`、`3f267a2d` | 首页私有（Social Responsibility 页面专有内容，布局虽与其他内容页类似，但文案和图片完全独立，暂不抽象） |
| `social-responsibility-client.php` | “Responsibility for client” 区块：右图左文的两列布局，与上一块镜像。强调客户责任、产品质量、未来愿景等 | `<section ... class="elementor-section elementor-top-section elementor-element elementor-element-79fe08ad elementor-reverse-mobile elementor-reverse-tablet ...">`，左列 `.elementor-element-5dd13b29` 下的 `elementor-element-fc71215`、`1686393e`、`63a7e0c`，右列 `.elementor-element-4f34d8e8` 下的图片 widget `elementor-element-776cefe4` | 首页私有（叙事内容专属，虽然“图文左右交错”的模式可在其他页面复用，但目前《模块映射.md》中尚未对这类内容页图文组合单独抽象为组件，先保持为本页私有） |
| `social-responsibility-environment.php` | “Responsibility for environment” 区块：左图右文，两列布局。强调环境责任、减少废弃物、回收利用等主题 | `<section ... class="elementor-section elementor-top-section elementor-element elementor-element-a20813 ...">`；左列 `.elementor-element-7495e703` 下图片 `elementor-element-2355d471`，右列 `.elementor-element-5f661585` 下 headings 与 text-editor：`elementor-element-ab5148e`、`f3c4c1a`、`45e11695` | 首页私有（同为单页叙事段落，目前仅此页面使用，暂不抽象为组件） |
| `social-responsibility-vision.php` | “Our vission / Give you a better Roll Forming Machine” 区块：左文右图的两列布局，强调企业愿景与行业贡献 | `<section ... class="elementor-section elementor-top-section elementor-element elementor-element-3a509b39 elementor-reverse-mobile elementor-reverse-tablet ...">`；左列 `.elementor-element-19fb9bc5` 内 `elementor-element-18cdc58`、`94dcd9c`、`f0e9be3`，右列 `.elementor-element-4bc3d71` 内图片 `elementor-element-4170897c` | 首页私有（同属 Social Responsibility 单页叙事模块，可视为环境责任段的收束与总结，目前没有在其他页面复用） |

> 说明：  
> - 底部 `<footer data-elementor-type="footer" data-elementor-id="442" ...>` 区块在《全站模块分析.md》中被明确归类为“5) 站点页脚（site-footer）”，属于全站公共模块，应该通过 `footer.php` + `template-parts/layout/site-footer.php` 统一输出，不推荐再拆出 `one_page/social-responsibility-footer.php` 这类页面级模块。  
> - 当前 `page-social-responsibility.php` 中直接嵌入了这段 Footer HTML，是从 `index-7.html` 一并迁移的临时状态，后续模块化改造时应移交到主题级 Footer 组件。

---

## 二、拆分后的 `page-social-responsibility.php` 结构预览

> 目标：  
> - 主模板只负责页面骨架和模块编排。  
> - 所有大段 Elementor 导出的 HTML 拆分到 `template-parts/one_page/` 下独立文件中。  
> - Header/Footer 继续由主题级 `get_header()` / `get_footer()` 负责。

示意结构如下（仅展示模块调用关系，内部 HTML 继续保持与 `index-7.html` 完全一致）：

```php
<?php
/**
 * Template Name: 社会责任
 * Social Responsibility 页面模板（从 swforming/index-7.html 迁移）
 */

get_header();
?>

<?php get_template_part('template-parts/one_page/social-responsibility-assets'); ?>

<main id="main" class="site-main hfeed">
    <div class="ct-container-full" data-content="normal">
        <article id="post-461" class="post-461 page type-page status-publish hentry">
            <div class="blocksy-woo-messages-default woocommerce-notices-wrapper">
                <div class="woocommerce"></div>
            </div>

            <div class="entry-content is-layout-constrained">
                <div data-elementor-type="wp-page" data-elementor-id="461" class="elementor elementor-461" data-elementor-post-type="page">
                    <?php
                    get_template_part('template-parts/one_page/social-responsibility-hero');
                    get_template_part('template-parts/one_page/social-responsibility-intro-and-pillars');
                    get_template_part('template-parts/one_page/social-responsibility-employees');
                    get_template_part('template-parts/one_page/social-responsibility-client');
                    get_template_part('template-parts/one_page/social-responsibility-environment');
                    get_template_part('template-parts/one_page/social-responsibility-vision');
                    ?>
                </div>
            </div>
        </article>
    </div>
</main>

<?php
get_footer();
?>
```

> 后续若要进一步提升复用度，可以参考《模块映射.md》的做法：  
> - 将 `social-responsibility-hero.php` 改为调用全站组件：`get_template_part('template-parts/components/page-hero-title.php', null, array('title' => 'Social Responsibility'));`  
> - 将 `social-responsibility-*` 几个正文段落保持在 `one_page/` 目录下，以免过度抽象，先保证迁移和视觉一致性。

---

## 三、与其他页面模块的复用关系

结合《全站模块分析.md》和 Elysia 主题当前实现，Social Responsibility 页面的模块复用关系如下：

- 首屏标题区（Hero）  
  - 类型：内容页首屏标题区（Page Hero / Page Title Section）。  
  - 对照模块：`page-hero-title`（已在《模块映射.md》中规划为 `template-parts/components/page-hero-title.php`）。  
  - 相似使用场景：`page-contact.php` 的顶部 “Contact” 区块（`contact-hero.php`）、Blog 列表和 Blog 详情自定义 hero（例如 `template-parts/blog/blog-hero.php`、`template-parts/blog_detail/blog-detail-hero.php`）。  
  - 建议：Social Responsibility 页的 Hero 最终与这些页面统一到同一组件，通过参数或 ACF 控制标题和背景。

- Footer CTA + 证书画廊 + 信息四列  
  - 在 `page-social-responsibility.php` 中直接内嵌 `<footer data-elementor-type="footer" data-elementor-id="442" ...>`，内容与 `index-4.html` ~ `index-15.html` 相同。  
  - 已在《全站模块分析.md》中作为“5) 站点页脚（site-footer）”全站级模块，建议：  
    - 在 `footer.php` 中统一 `get_template_part('template-parts/layout/site-footer')`；  
    - 从各单页模板（包括 `page-social-responsibility.php`）中移除重复的 Footer HTML。

- 图文左右交错的叙事区块  
  - Social Responsibility 页的 4 个内容区块（Employees / Client / Environment / Vision）使用了高度一致的布局模式（两列图文 + 不同文案）。  
  - 当前在其他单页（如 About / Why Us / Factory）中也能找到类似的两列图文组合，但具体文案和布局细节并不完全一致。  
  - 建议：  
    - 短期：保持为本页私有的 `social-responsibility-*` 模块。  
    - 中长期：如在多页反复使用同一图文模式，可抽象为 `template-parts/components/section-media-content.php` 之类的通用组件，通过参数控制标题、正文、图片位置（左/右）。

---

## 四、拆分实现时的核心注意项

1. 结构与 Header/Footer 职责边界  
   - `page-social-responsibility.php` 中应只保留 `get_header();` / `get_footer();` 调用，所有 `<html>`、`<head>`、`<body>` 骨架和全站级覆盖层（Search / Offcanvas / Popup 等）都交给主题级 Header/Footer 处理。  
   - 当前文件内嵌的 `<footer data-elementor-type="footer" ...>` 在模块化时应移出主模板，由 `footer.php` 中的 `site-footer` 组件统一输出，避免 Footer 结构出现多份。

2. 全局变量与 WooCommerce/WP 环境  
   - Social Responsibility 页主体内容为静态 Elementor HTML，不依赖 `$post`、`$product`、`the_title()`、`the_content()` 等全局变量；仅使用到 `get_header()` / `get_footer()`。  
   - 拆分到 `template-parts/one_page/*` 后，保持子模块只依赖 WordPress 全局环境即可，不在子模块里重新查询 WP_Query 或 WooCommerce Loop。  
   - 若未来引入 ACF 管理文案（例如将 “What we do” 段落或 4 个支柱卡片的标题、正文抽离为字段），注意字段作用域应绑定当前页面 ID（普通 Page 级字段），而非 `options`。

3. 脚本与样式顺序  
   - `social-responsibility-assets.php` 中的 `<link>` 和 `<script>` 顺序应尽量保持与当前 `page-social-responsibility.php` 内部一致：  
     - Rank Math 和 JSON-LD 结构化数据在前；  
     - Blocksy / Elementor / WooCommerce 相关 CSS 之后；  
     - jQuery / Elementor 前端脚本 / okki 分析脚本与本地 `static/js/*.js` 在后。  
   - 拆分时避免把某些依赖 jQuery 的脚本提前到 jQuery 之前，或者改变 `defer` / `async` 组合，保证行为与 `index-7.html` 一致。

4. 全站公共模块的引用方式  
   - Page Hero：Social Responsibility 页最终推荐通过 `components/page-hero-title.php` 实现，以与 Contact、Solution、Blog 等页面的标题区统一。  
   - Footer：Footer 结构不应再以 `one_page` 模块形式存在，而是走 `template-parts/layout/site-footer.php`，在 `footer.php` 中统一挂载，这一点与《模块映射.md》中对 `site-footer` 的定义一致。

5. 与产品相关模块的关系说明  
   - 虽然本报告沿用“产品列表模块拆分核对报告”的命名，但 `page-social-responsibility.php` 本身不包含 WooCommerce 产品列表或 `card-product` 模块。  
   - 与产品模块唯一直接关联的是：本页底部 Footer 中的“Contact / Product / Solution / Blog / Project”等导航链接，以及全站共享的联系 CTA；真正的产品卡片和产品 CTA 统一由 `template-parts/loop/card-product.php`、`template-parts/product/archive-contact-us-cta.php` 等组件负责。  
   - 因此，Social Responsibility 页的模块拆分重点在于内容页叙事结构和 Page Hero 复用，而非产品 Loop 的动态化。

---

## 五、总结建议

- 将 `page-social-responsibility.php` 拆分为 1 个资源模块 + 6 个内容模块：  
  - 资源：`one_page/social-responsibility-assets.php`（页面级 CSS/JS 与 SEO 元信息）。  
  - 内容：Hero、生动介绍 + 四个责任段落，各自独立为 `one_page/social-responsibility-*.php`。  
- Hero 模块建议中长期统一到 `template-parts/components/page-hero-title.php`，与 Contact/Solution/Blog 等页面共享；Footer 保持走全站 `site-footer` 组件。  
- 其它四个责任段落及 “What we do” 区块先按页面私有模块落地，后续如在 About/Why Us 等内容页复用，再按 `components/` 级别抽象。  

这份拆分核对报告可以直接作为后续改造 `page-social-responsibility.php` 为模块化结构的蓝本，在保持与 `index-7.html` 视觉完全一致的前提下，逐步提升模块复用度。

