# 项目案例模块拆分核对报告（page-project.php）

模板文件：`e:\phpstudy_pro\WWW\wp-content\themes\Elysia_first_web\page-project.php`  
页面来源：`index-9.html`（Roll forming machine projects）

---

## 一、拆分清单表格

> 仅针对 `<main>` 内 Elementor 内容区域进行模块拆分；头部 `<link>/<script>` 保留在主模板中，不做模块化。

| 序号 | 建议文件名                                       | 作用区块/功能描述                                                                 | HTML 标识 / 锚点（起始特征）                                                                                                                      | 重用性评估 |
|------|--------------------------------------------------|-----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------|-----------|
| 1    | `template-parts/components/page-hero-title.php` | 项目案例页首屏标题区，展示 H1 主标题 “Our Project”，统一页面 Hero 头部高度与背景。 | `section.elementor-top-section.elementor-element-df7b03f` 内含 `h1.elementor-heading-title` 文案 “Our Project”                                    | 全站通用（复用全站 `page-hero-title` 组件，建议改造为动态标题） |
| 2    | `template-parts/one_page/project-intro.php`     | 项目简介 + 全球合作文案 + 右侧双图展示 + CTA 询盘按钮（调用全站 Footer CTA 配置）。 | `section.elementor-top-section.elementor-element-48a237c`，左列含 “We Work With Global!”、“Sunway Completed Some Project...”，CTA 按钮 `data-id="95409bf"`；右列两张图片 `about-1-1.png` / `about-1-2.png` | 页面私有（项目案例专用版式，文案与该页强绑定） |
| 3    | `template-parts/one_page/project-grid-1.php`    | 项目案例栅格第 1 组：4 列项目卡片（马来西亚门板机、墨西哥屋面机、美国电缆桥架机、法国 C Purlin）。 | `section.elementor-top-section.elementor-element-9f60d45`，内部四个 `.elementor-col-25`：包括 “Malaysia / door machine”、“Mexico / Roofing machine”、“The U.S. / cabel tray machine”、“France / C Prulin” 等文案 | 页面私有（单页项目列表内容，静态文案与图片绑定） |
| 4    | `template-parts/one_page/project-grid-2.php`    | 项目案例栅格第 2 组：4 列项目卡片（印度货架机、孟加拉窗机、意大利 Step Beam 机、印度 Box Beam 机）。 | `section.elementor-top-section.elementor-element-35ca065`，含图片 `IMG_2953.jpg`、`IMG_0347.jpg`、`IMG_8241.jpg`、`IMG_4680.jpg`，对应 “India / Racking Machine”、“Bengal / Window machine”、“Italy / Step Beam machine”、“India / Box Beam machine” | 页面私有 |
| 5    | `template-parts/one_page/project-grid-3.php`    | 项目案例栅格第 3 组：4 列项目卡片（埃塞俄比亚 Z Purlin 机、美国墙板机、美国 C Purlin 机、下一站目的地）。 | `section.elementor-top-section.elementor-element-cb9a52c`，图片 `IMG_3806.jpg`、`IMG_1799-1.jpg`、`IMG_0385.jpg`、`1dcddec0-66f5-4503-b3c9-0deb0192f307.jpg`，文案如 “Ethiopia / Z Purlin machine”、“The U.S. / Wall machine”、“Next Destination / Waiting for you to consult” | 页面私有 |

### 关于首屏 Hero 的复用建议

- 该区块结构与「普通单页 Page Hero」的模式一致：`section.elementor-top-section` + `h1.elementor-heading-title`。
- 根据《全站模块分析.md》中 **“内容页首屏标题区（page-hero-title）”** 的定义，建议用现有组件 `template-parts/components/page-hero-title.php` 替代当前硬编码结构：
  - 通过 `the_title()` 或自定义字段输出标题；
  - 统一背景与高度，减少多页调整成本。

---

## 二、拆分后 page-project.php 结构预览

下面的示例仅展示主内容区域的调用关系，保留现有 `<link>`、`<script>` 与 `<main>`/`<article>` 结构不变，只将原先的 Elementor 各大 `section` 替换为模块调用：

```php
<?php
/**
 * Template Name: 项目案例
 */

get_header();
?>

<link rel='stylesheet' id='blocksy-dynamic-global-css' href='<?php echo get_template_directory_uri(); ?>/static/css/global.css' media='all' />
<link rel='stylesheet' id='wp-block-library-css' href='<?php echo get_template_directory_uri(); ?>/static/css/style.min.css' media='all' />
<style id='wp-img-auto-sizes-contain-inline-css'>
    img:is([sizes=auto i], [sizes^="auto," i]) {
        contain-intrinsic-size: 3000px 1500px
    }
</style>
<style id='global-styles-inline-css'>
    :root {
        --wp--preset--aspect-ratio--square: 1;
        --wp--preset--aspect-ratio--4-3: 4/3;
        --wp--preset--aspect-ratio--3-4: 3/4;
        --wp--preset--aspect-ratio--3-2: 3/2;
        --wp--preset--aspect-ratio--2-3: 2/3;
        --wp--preset--aspect-ratio--16-9: 16/9;
    }
</style>
<link rel='stylesheet' id='woocommerce-inline-inline-css' href='<?php echo get_template_directory_uri(); ?>/static/css/woocommerce-inline.css' media='all' />
<script src="<?php echo get_template_directory_uri(); ?>/static/js/jquery.min.js" id="jquery-core-js"></script>
<script src="<?php echo get_template_directory_uri(); ?>/static/js/jquery-migrate.min.js" id="jquery-migrate-js"></script>
<script src="<?php echo get_template_directory_uri(); ?>/static/js/jquery.blockUI.min.js" id="wc-jquery-blockui-js" defer data-wp-strategy="defer"></script>

<main id="main" class="site-main hfeed">
    <div class="ct-container-full" data-content="normal">
        <article id="post-419" <?php post_class('page-project'); ?>>
            <div class="blocksy-woo-messages-default woocommerce-notices-wrapper">
                <div class="woocommerce"></div>
            </div>

            <div class="entry-content is-layout-constrained">
                <?php
                // 首屏标题区（建议复用全站 page-hero-title 组件）
                get_template_part('template-parts/components/page-hero-title');

                // 项目简介 + CTA + 右侧双图
                get_template_part('template-parts/one_page/project-intro');

                // 项目案例栅格第 1 组
                get_template_part('template-parts/one_page/project-grid-1');

                // 项目案例栅格第 2 组
                get_template_part('template-parts/one_page/project-grid-2');

                // 项目案例栅格第 3 组
                get_template_part('template-parts/one_page/project-grid-3');
                ?>
            </div>
        </article>
    </div>
</main>

<?php
get_footer();
```

---

## 三、核心注意项（变量 / Hook / 动画等）

- **全站 CTA 配置的复用**
  - 在简介区模块 `project-intro.php` 中，需保留原有 CTA 按钮的动态配置逻辑：

    ```php
    <?php
    $cta_btn_url  = get_option('elysia_footer_cta_button_url', home_url('/contact/'));
    $cta_btn_text = get_option('elysia_footer_cta_button_text', __('INQUIRY NOW', 'elysia_first_web'));
    ?>
    <a class="elementor-button elementor-button-link elementor-size-md" href="<?php echo esc_url($cta_btn_url); ?>">
        <span class="elementor-button-content-wrapper">
            <span class="elementor-button-text"><?php echo esc_html($cta_btn_text); ?></span>
        </span>
    </a>
    ```

  - 拆分时不要把 URL 或文案改成硬编码，确保与 Footer CTA 全站配置保持一致。

- **Elementor 动画与样式保留**
  - 各项目卡片内大量使用类似 `hidefirst`、`animated-fast`、`elementor-invisible` 以及 `data-settings` 中的 `_animation`、`_animation_delay` 属性，配合 `fadeInUp` 动画样式。
  - 拆分到 `template-parts/one_page/*.php` 时，必须原样保留：
    - `data-id="..."`、`data-element_type="..."`；
    - `data-settings='{"_animation":"fadeInUp","_animation_delay":100}'`；
    - `.elementor-widget-divider--view-line`、`.elementor-heading-title` 等 class。
  - 这些信息驱动前端动画与主题样式，删除或改动会影响展示效果。

- **WooCommerce / 全局变量**
  - 当前 `page-project.php` 中没有 `global $product` 或 WooCommerce Loop，仅包含：
    - WooCommerce 相关 JS、CSS 的 `<link>` 和 `<script>` 引入；
    - 一个空的 `<div class="woocommerce"></div>` 容器。
  - 拆分模块不会直接影响 WooCommerce 逻辑，但：
    - 若后续将 Woo 相关脚本迁移到 `functions.php` 的 `wp_enqueue_scripts` 中，请检查项目页面是否仍需要这些脚本。

- **模块粒度与后期扩展**
  - 三个项目栅格模块结构高度一致，只是图片与文案不同：
    - 后续如需要更高级的复用，可进一步抽象出一个「项目卡片组件」或「项目列表循环」，改由自定义文章类型/ACF 提供数据。
  - 当前阶段按整块 `section` 为单位拆分，便于与原始 HTML 一一对照，安全风险最低。

- **与其他页面的联动**
  - 首屏标题区建议复用全站 `page-hero-title` 组件，保持 About、Why Us、Factory、Quality Manufacturing、Project 等所有普通单页在「标题层级、背景样式」上的一致性。
  - 介绍 + CTA 的区块风格接近其它页面的营销段落，但文案和图片完全项目页专用，按页面私有处理是合理折中；若今后在多个页面沿用该版式，可再抽象为 `template-parts/components/section-global-project-intro.php` 等公共组件。

