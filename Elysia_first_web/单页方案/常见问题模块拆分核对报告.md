# 常见问题模块拆分核对报告（page-faq.php）

模板文件：`e:\phpstudy_pro\WWW\wp-content\themes\Elysia_first_web\page-faq.php`  
页面来源：`index-10.html`（FAQ，single_page 类型）

---

## 一、拆分清单表格

> 仅针对 `<main>` 内 Elementor 内容区域进行模块拆分；头部 `<link>/<script>` 保留在主模板中，不做模块化。

| 序号 | 建议文件名                                       | 功能描述                                                                                  | HTML 标识 / 锚点（起始特征）                                                                                                                                       | 重用性评估 |
|------|--------------------------------------------------|-------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|
| 1    | `template-parts/components/page-hero-title.php` | FAQ 页首屏标题区，展示 H1 “FAQ”，统一普通单页的 Hero 标题区样式和高度。                  | `section.elementor-top-section.elementor-element-3cea8df6` 内含 `h1.elementor-heading-title` 文案 “FAQ”                                                            | 全站通用（复用全站 `page-hero-title` 组件，建议改为动态标题） |
| 2    | `template-parts/one_page/faq-intro.php`         | FAQ 左侧引导文案区：欢迎提问文案 + 简短说明 + 联系我们按钮（跳转到 Contact 页面）。       | `section.elementor-top-section.elementor-element-4ba54a32` 内部左列 `elementor-element-6b370a5a` → 内层 `section.elementor-inner-section.elementor-element-2794ebff`，包含 “We welcome question!” 文案和 `CONTACT US NOW→` 按钮 | 页面私有（FAQ 页专用文案与按钮逻辑） |
| 3    | `template-parts/one_page/faq-accordion.php`     | FAQ 右侧问答折叠区：使用 EAEL Advanced Accordion 输出 7 条问答，支持展开/收起交互。        | 与上面同一顶层 `section.elementor-element-4ba54a32` 的右列 `elementor-element-2ab71414`，内部 `div.elementor-widget-eael-adv-accordion`、`div.eael-adv-accordion`、多组 `.eael-accordion-list` | 页面私有（问答内容 & 结构与本页绑定，如后续多页 FAQ 可再抽象） |

### 关于首屏 Hero 的复用说明

- 该区块结构与《全站模块分析.md》中定义的 “内容页首屏标题区（page-hero-title）” 一致：
  - 结构锚点：`section.elementor-top-section.ct-section-stretched` + `h1.elementor-heading-title`
- 建议：
  - 不再在 FAQ 页面内硬编码该 `section`；
  - 统一使用 `template-parts/components/page-hero-title.php`；
  - 利用 `the_title()` 或主题统一规则输出当前页面标题（FAQ）。

---

## 二、拆分后 page-faq.php 结构预览

下面仅示意主内容部分如何通过 `get_template_part()` 调用各模块，`<link>` / `<script>` / `<main>` 等骨架结构照旧保留在 `page-faq.php` 中。

```php
<?php
/**
 * Template Name: 常见问题
 * 常见问题页模板（从 swforming/index-10.html 迁移）
 */

get_header();
?>

<link rel='stylesheet' id='blocksy-dynamic-global-css' href='<?php echo get_template_directory_uri(); ?>/static/css/global.css' media='all' />
<link rel='stylesheet' id='wp-block-library-css' href='<?php echo get_template_directory_uri(); ?>/static/css/style.min.css' media='all' />
<style id='wp-img-auto-sizes-contain-inline-css'>
    img:is([sizes=auto i], [sizes^="auto," i]) {
        contain-intrinsic-size: 3000px 1500px
    }
</style>
<style id='global-styles-inline-css'>
    :root {
        --wp--preset--aspect-ratio--square: 1;
        --wp--preset--aspect-ratio--4-3: 4/3;
        --wp--preset--aspect-ratio--3-4: 3/4;
        --wp--preset--aspect-ratio--3-2: 3/2;
        --wp--preset--aspect-ratio--2-3: 2/3;
        --wp--preset--aspect-ratio--16-9: 16/9;
    }
</style>
<link rel='stylesheet' id='woocommerce-inline-inline-css' href='<?php echo get_template_directory_uri(); ?>/static/css/woocommerce-inline.css' media='all' />
<link rel='stylesheet' id='trp-language-switcher-style-css' href='<?php echo get_template_directory_uri(); ?>/static/css/trp-language-switcher.css' media='all' />
<link rel='stylesheet' id='brands-styles-css' href='<?php echo get_template_directory_uri(); ?>/static/css/brands.css' media='all' />
<link rel='stylesheet' id='parent-style-css' href='<?php echo get_template_directory_uri(); ?>/static/css/style.css' media='all' />
<link rel='stylesheet' id='ct-main-styles-css' href='<?php echo get_template_directory_uri(); ?>/static/css/main.min.css' media='all' />
<link rel='stylesheet' id='ct-woocommerce-styles-css' href='<?php echo get_template_directory_uri(); ?>/static/css/woocommerce.min.css' media='all' />
<link rel='stylesheet' id='ct-elementor-styles-css' href='<?php echo get_template_directory_uri(); ?>/static/css/elementor-frontend.min.css' media='all' />
<link rel='stylesheet' id='ct-elementor-woocommerce-styles-css' href='<?php echo get_template_directory_uri(); ?>/static/css/elementor-woocommerce-frontend.min.css' media='all' />
<link rel='stylesheet' id='elementor-frontend-css' href='<?php echo get_template_directory_uri(); ?>/static/css/frontend.min.css' media='all' />
<link rel='stylesheet' id='eael-general-css' href='<?php echo get_template_directory_uri(); ?>/static/css/general.min.css' media='all' />
<link rel='stylesheet' id='eael-294-css' href='<?php echo get_template_directory_uri(); ?>/static/css/eael-294.css' media='all' />

<script src="<?php echo get_template_directory_uri(); ?>/static/js/jquery.min.js" id="jquery-core-js"></script>
<script src="<?php echo get_template_directory_uri(); ?>/static/js/jquery-migrate.min.js" id="jquery-migrate-js"></script>
<script src="<?php echo get_template_directory_uri(); ?>/static/js/jquery.blockUI.min.js" id="wc-jquery-blockui-js" defer data-wp-strategy="defer"></script>
<script src="<?php echo get_template_directory_uri(); ?>/static/js/add-to-cart.min.js" id="wc-add-to-cart-js" defer data-wp-strategy="defer"></script>
<script src="<?php echo get_template_directory_uri(); ?>/static/js/js.cookie.min.js" id="wc-js-cookie-js" defer data-wp-strategy="defer"></script>
<script src="<?php echo get_template_directory_uri(); ?>/static/js/woocommerce.min.js" id="woocommerce-js" defer data-wp-strategy="defer"></script>
<script src="<?php echo get_template_directory_uri(); ?>/static/js/trp-frontend-compatibility.js" id="trp-frontend-compatibility-js"></script>

<main id="main" class="site-main hfeed">
    <div class="ct-container-full" data-content="normal">
        <article id="post-294" <?php post_class('page-faq'); ?>>
            <div class="blocksy-woo-messages-default woocommerce-notices-wrapper">
                <div class="woocommerce"></div>
            </div>

            <div class="entry-content is-layout-constrained">
                <div class="elementor elementor-294" data-elementor-type="wp-page" data-elementor-id="294" data-elementor-post-type="page">
                    <?php
                    get_template_part('template-parts/components/page-hero-title');
                    get_template_part('template-parts/one_page/faq-intro');
                    get_template_part('template-parts/one_page/faq-accordion');
                    ?>
                </div>
            </div>
        </article>
    </div>
</main>

<?php
get_footer();
```

---

## 三、核心注意项（变量 / Hook / 插件依赖）

- 全局变量 / WooCommerce Hooks  
  当前 `page-faq.php` 未使用 `global $product` 或 WooCommerce Loop，仅包含 Woo JS/CSS 引入和一个空的 `.woocommerce` 容器。拆分模块时对 PHP/Woo 层影响极小。

- Elementor / EAEL 结构与属性  
  FAQ 折叠区采用 EAEL Advanced Accordion，拆分到 `faq-accordion.php` 时必须保留所有 `id`、`data-tab`、`aria-*` 属性和 `.eael-accordion-list` 结构，以保证折叠交互正常。

- 按钮链接与复用  
  `faq-intro.php` 中的 “CONTACT US NOW→” 按钮目前为硬编码外链，如需与全站 CTA 统一，可改为使用 `get_option('elysia_footer_cta_button_url')` 等配置。

- 与其他页面的联动 / 复用评估  
  首屏 Hero 建议统一复用 `template-parts/components/page-hero-title.php`，FAQ 的引导区和折叠区暂按页面私有处理，若未来其它页面也需要 FAQ 模块，可在此基础上进一步抽象为全站组件。

